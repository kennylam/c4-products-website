---
title: Contributing
---

<PageDescription>

  This page describes how to contribute content and updates to this website.

</PageDescription>
<InlineNotification kind="warning">

  This is a work in progress, and will be updated as more users come onboard.

</InlineNotification>

## Overview

* The source, including all content,  of this website is held in IBM's
internal Github Enterprise instance, here: <https://github.ibm.com/CDAI-design/CDAI-design-website>

* The site is based on gatsby-theme-carbon (<https://github.com/carbon-design-system/gatsby-theme-carbon>), with
minimal changes.

* Almost all of the content is created as MDX markup (a hybrid of Markdown and JSX). See: <https://mdxjs.com/>

* A travis build automatically builds and deploys updates to the master branch.
PRs (git pull requests) are also built but not deployed, just to test that they build correctly.
(<https://travis.ibm.com/CDAI-design/CDAI-design-website/builds>)

* Updates to the site are made via PRs that must pass
the automated Travis build and review by at least one other authorised person.
PRs are based on branches created within the git repository, not in any forked
repositories.

* In order to contribute, a local development environment is needed that can access the
git repository, edit the source, run a local build and deploy, and display
the site. The tooling needed includes: git, an editor, Node.js, Yarn, and a
browser.

## Detailed instructions for MacOS environment setup

The following is one option for setting up the necessary environment on MacOS:

### Request Write access

The ability to make updates to these pages is controlled through membership of a github team.
While you will be able to complete the setup detailed below, updates to the repository will fail without
the apprpriate permissions.

Before you continue with the setup, request access to the CDAI-Design-Editors team from one of its maintainers.
Asking someone local to you or in  your organisation is likely to be result in access being granted with less of a delay.

CDAI-Design-Etitors maintainers - (https://github.ibm.com/orgs/CDAI-design/teams/cdai-design-editors/members?utf8=%E2%9C%93&query=+role%3Amaintainer)

### Configure MacOS settings

1. Open a finder window and locate your home folder. (You can do this by
opening a MacOS command prompt and executing `open ~/`)

2. Create a folder called something like 'source' or 'projects' to hold the
git repositories. You may want to also drag this folder into your favourites
in Finder to make it easy to find later.

3. In Finder press `cmd+shift+.` to make hidden files visible.

### Install NVM

This installs Node Version Manager, which is a convenient way to install and
manage versions of Node.js. See: <https://github.com/nvm-sh/nvm/blob/master/README.md>

You must have a `.bash_profile` (which is a hidden file) file present in your home folder. If not go
to the MacOS command prompt and execute
```
touch ~/.bash_profile
```

To install NVM paste the following into a MacOS command prompt
```
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.1/
install.sh | bash
```

<InlineNotification kind="info">

If you are using MacOS Catalina the default shell may be changed to zsh from bash.
In this case you will need to copy updates that the NVM install script makes to
`.bash_profile` into a `.zprofile` file.

</InlineNotification>

If you don't have Xcode command line tools installed then at this point
the NVM installer will try to automatically install them. (If you do not have
network access to Apple this will fail by hanging.)

Close the existing MacOS command prompt and open a new one. Then,
type `nvm --version` at the new MacOS command prompt to check that NVM is installed.

### Install Node.js

This installs the Node.js Javascript engine that is used to build and test
the website.

At a MacOS command prompt issue the command:
```
nvm install 10
```

### Install Yarn

See: <https://yarnpkg.com/lang/en/docs/install/#mac-stable> for detailed info.

At a MacOS command prompt issue the command
```
curl -o- -L https://yarnpkg.com/install.sh | bash
```

### Setup your github account to accept SSH connections.

Use the instructions here: <https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh>
to check if you already have SSH to github setup, and if not to create a new keypair and
configure your machine and github to use it.

In both cases be sure to follow the instructions to ensure that your key is
added to the ssh-agent, otherwise you will be prompted for the key passphrase
every time you access github.

### Clone the CDAI-design-website repository

At a MacOS command prompt `cd` to the directory where you want the clone of the
repository to be created (probably the one you created in 'Configure MacOS settings' above) and then issue the command:
```
git clone git@github.ibm.com:CDAI-design/CDAI-design-website.git
```

### Install the project dependencies, build it and start the development server

Using the MacOS command prompt above issue the following commands:
```
cd CDAI-design-website
yarn install
yarn dev
```

You should now be able to point a browser at <http://localhost:8000> and see the
local copy of the driver running. It will automatically update whenever changes
are made to the source code in the local, cloned repository.

<InlineNotification kind="info">

The `yarn install` command only needs to be run the very first time the repository
is cloned or when the NPM packages that
are dependencies change. Running `yarn dev` is normally sufficient to
build and start the development server. If you have unexpected build problems
after updating from the master repository then run `yarn install` to be sure that
you have the latest depencencies installed.

</InlineNotification>

### Install the VSCode editor and some extensions for editing the site.

VSCode is a popular code editor which has extensions and features that can help
when editing project files. It is not the only option, but is recommended if
you have no other strong preference.

Go to <https://code.visualstudio.com/> and download and install VSCode.

Once installed, start VSCode and search for and add the extensions 'Prettier' (a code formatter),
'MDX' (syntax highlighting), 'Indent-rainbow' (indent highlighter), and 'GitLens'.

![Image of UI to use](images/1.png)

As a convenience install the command `code` in the PATH. This allows you to type
`code <folder>` at a command prompt to open VSCode in the current folder.
NOTE `.` is the current folder. To do this use the command palette:

![Image of UI to use](images/2.png)

![Image of UI to use](images/3.png)

Finally, at some point during hte install you will be offered to option to
‘auto fetchʼ updates - do enable this. It can be found in settings if you miss this step.

![Image of UI to use](images/4.png)

## Workflow - how to update the site

1. Open the local clone of the CDAI-design-website repository in VSCode.

2. Create a new branch by clicking on 'master' in the bottom left corner. Each set of
changes needs to be in a separate PR for approval and merging. Each PR needs to
have its changes in its own branch. Give the branch a meaningful name.

  ![Image of UI to use](images/5.png)

  ![Image of UI to use](images/6.png)

  ![Image of UI to use](images/7.png)

3. Now, make your first edits.

4. To see the effect of your edits make sure the development server is running
   (as described above). If it is not then start it using the `yarn dev` command in the terminal provided
   by VSCode.

   ![Image of UI to use](images/8.png)

   When you do this you will see something like this:

   ![Image of UI to use](images/9.png)

   Open <http://localhost:8000> in your browser and verify your changes. Continue
   making changes until you are happy with the results.

5. Review your changes: In the left-hand toolbar in VSCode you should see an indication as to the
   number of files changed. Clicking it will show your changed files.

   ![Image of UI to use](images/10.png)

   Clicking on individual files will show the changes you have made:

   ![Image of UI to use](images/11.png)

6. If the changes are OK then the next step is to commit them and push (upload) the
   branch to the master repository.

   a. Stage each of the files you wish to push by clicking the plus to the
      right of it:

      ![Image of UI to use](images/12.png)

   b. Commit the changes by adding a message to the text box and clicking the
      checkmark above. (NOTE: all messages must be prefixed with ‘chore:ʼ, ‘fix:ʼ
      or ‘feat:ʼ to denote a general update, fix or new feature):

      ![Image of UI to use](images/13.png)

   c. Push your changes by clicking on the cloud or up arrow (depends on
      whether you have already pushed changes to a branch previously or not).
      If clicking on the cloud you will be asked to select where to middle
      top. Select 'origin'.

      ![Image of UI to use](images/14.png)

      ![Image of UI to use](images/15.png)

      You will see a spinner bottom left until the upload is complete.

      If you've already pushed then the cloud is not displayed, just up and
      down arrows:

      ![Image of UI to use](images/16.png)

7. Once the branch with the changes has been pushed up to the master
   repository then a PR (pull request) needs to be created to get the
   changes reviewed and merged into the master branch (which will cause
   them to be deployed to the site).

   a. Go to the master repository <https://github.ibm.com/CDAI-design/CDAI-design-website> and click on ‘Compare & pull requestʼ, which should
      appear any time you have recently uploaded changes:

      ![Image of UI to use](images/17.png)

      If it does not you can achieve the same thing from the 'Pull requests'
      tab by clicking 'Create pull request':

      ![Image of UI to use](images/18.png)

   b. Give the pull request a useful title, and if a specific reviewer is
      desired then assign them. If the change is non-trivial then some description
      of the changes will probably aid the reviewer.

   c. When the review is completed and the build checks are complete the
      'Squash and merge' button will be green and enabled. Merging the PR then
      completes the process.

      ![Image of UI to use](images/19.png)
